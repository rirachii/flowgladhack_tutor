openapi: 3.1.0
info:
  title: TutorTalk API
  description: REST API for the TutorTalk personalized language learning platform
  version: 1.0.0

servers:
  - url: /api
    description: API routes

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # Enums
    Difficulty:
      type: string
      enum: [beginner, intermediate, advanced]

    QuestionInputType:
      type: string
      enum: [text, voice, multiple_choice]

    ProgressStatus:
      type: string
      enum: [in_progress, completed]

    # Core Entities
    Profile:
      type: object
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
          format: email
        display_name:
          type: string
          nullable: true
        avatar_url:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required: [id, email, created_at, updated_at]

    Module:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
        description:
          type: string
        topic:
          type: string
        difficulty:
          $ref: '#/components/schemas/Difficulty'
        estimated_duration_mins:
          type: integer
        thumbnail_url:
          type: string
          nullable: true
        is_published:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required: [id, title, description, topic, difficulty, estimated_duration_mins, is_published, created_at, updated_at]

    Section:
      type: object
      properties:
        id:
          type: string
          format: uuid
        module_id:
          type: string
          format: uuid
        title:
          type: string
        content:
          type: string
        order_index:
          type: integer
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required: [id, module_id, title, content, order_index, created_at, updated_at]

    QuizQuestion:
      type: object
      properties:
        id:
          type: string
          format: uuid
        question_text:
          type: string
        input_type:
          $ref: '#/components/schemas/QuestionInputType'
        options:
          type: array
          items:
            type: string
        correct_answer:
          type: string
        order_index:
          type: integer
      required: [id, question_text, input_type, order_index]

    Quiz:
      type: object
      properties:
        id:
          type: string
          format: uuid
        section_id:
          type: string
          format: uuid
        title:
          type: string
        questions:
          type: array
          items:
            $ref: '#/components/schemas/QuizQuestion'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required: [id, section_id, title, questions, created_at, updated_at]

    QuizAnswer:
      type: object
      properties:
        question_id:
          type: string
          format: uuid
        user_response:
          type: string
        is_correct:
          type: boolean
          nullable: true
      required: [question_id, user_response]

    QuizResult:
      type: object
      properties:
        id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
        quiz_id:
          type: string
          format: uuid
        score:
          type: integer
          minimum: 0
          maximum: 100
        answers:
          type: array
          items:
            $ref: '#/components/schemas/QuizAnswer'
        completed_at:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
      required: [id, user_id, quiz_id, score, answers, completed_at, created_at]

    UserModuleProgress:
      type: object
      properties:
        id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
        module_id:
          type: string
          format: uuid
        status:
          $ref: '#/components/schemas/ProgressStatus'
        current_section_index:
          type: integer
        started_at:
          type: string
          format: date-time
        completed_at:
          type: string
          format: date-time
          nullable: true
      required: [id, user_id, module_id, status, current_section_index, started_at]

    # Response wrappers
    Pagination:
      type: object
      properties:
        total:
          type: integer
          nullable: true
        limit:
          type: integer
        offset:
          type: integer
        hasMore:
          type: boolean
      required: [total, limit, offset, hasMore]

    ApiError:
      type: object
      properties:
        success:
          type: boolean
          const: false
        error:
          type: string
        details:
          type: string
      required: [success, error]

    # Input schemas
    ModuleCreate:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        topic:
          type: string
        difficulty:
          $ref: '#/components/schemas/Difficulty'
        estimated_duration_mins:
          type: integer
          default: 5
        thumbnail_url:
          type: string
        is_published:
          type: boolean
          default: false
      required: [title, description, topic, difficulty]

    ModuleUpdate:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        topic:
          type: string
        difficulty:
          $ref: '#/components/schemas/Difficulty'
        estimated_duration_mins:
          type: integer
        thumbnail_url:
          type: string
        is_published:
          type: boolean

    SectionCreate:
      type: object
      properties:
        module_id:
          type: string
          format: uuid
        title:
          type: string
        content:
          type: string
        order_index:
          type: integer
      required: [module_id, title, content, order_index]

    SectionUpdate:
      type: object
      properties:
        title:
          type: string
        content:
          type: string
        order_index:
          type: integer

    QuizCreate:
      type: object
      properties:
        section_id:
          type: string
          format: uuid
        title:
          type: string
        questions:
          type: array
          items:
            $ref: '#/components/schemas/QuizQuestion'
          default: []
      required: [section_id, title]

    QuizUpdate:
      type: object
      properties:
        title:
          type: string
        questions:
          type: array
          items:
            $ref: '#/components/schemas/QuizQuestion'

    ProfileUpdate:
      type: object
      properties:
        display_name:
          type: string
        avatar_url:
          type: string

    QuizResultCreate:
      type: object
      properties:
        quiz_id:
          type: string
          format: uuid
        score:
          type: integer
          minimum: 0
          maximum: 100
        answers:
          type: array
          items:
            $ref: '#/components/schemas/QuizAnswer'
      required: [quiz_id, score, answers]

    ProgressCreate:
      type: object
      properties:
        module_id:
          type: string
          format: uuid
      required: [module_id]

    ProgressUpdate:
      type: object
      properties:
        status:
          $ref: '#/components/schemas/ProgressStatus'
        current_section_index:
          type: integer
        completed_at:
          type: string
          format: date-time

paths:
  # Modules
  /modules:
    get:
      operationId: listModules
      summary: List published modules
      tags: [Modules]
      parameters:
        - name: topic
          in: query
          schema:
            type: string
        - name: difficulty
          in: query
          schema:
            $ref: '#/components/schemas/Difficulty'
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: List of modules
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Module'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                required: [success, data, pagination]
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    post:
      operationId: createModule
      summary: Create a new module
      tags: [Modules]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ModuleCreate'
      responses:
        '201':
          description: Module created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Module'
                required: [success, data]
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  /modules/{id}:
    get:
      operationId: getModule
      summary: Get a single module
      tags: [Modules]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Module details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Module'
                required: [success, data]
        '404':
          description: Module not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    patch:
      operationId: updateModule
      summary: Update a module
      tags: [Modules]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ModuleUpdate'
      responses:
        '200':
          description: Module updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Module'
                required: [success, data]
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '404':
          description: Module not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    delete:
      operationId: deleteModule
      summary: Delete a module
      tags: [Modules]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Module deleted
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  /modules/{id}/sections:
    get:
      operationId: getModuleSections
      summary: Get all sections for a module
      tags: [Modules, Sections]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: List of sections
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Section'
                required: [success, data]
        '404':
          description: Module not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  # Sections
  /sections:
    get:
      operationId: listSections
      summary: List sections
      tags: [Sections]
      parameters:
        - name: module_id
          in: query
          schema:
            type: string
            format: uuid
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: List of sections
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Section'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                required: [success, data, pagination]
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    post:
      operationId: createSection
      summary: Create a new section
      tags: [Sections]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SectionCreate'
      responses:
        '201':
          description: Section created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Section'
                required: [success, data]
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '409':
          description: Conflict (duplicate order_index)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  /sections/{id}:
    get:
      operationId: getSection
      summary: Get a single section
      tags: [Sections]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Section details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Section'
                required: [success, data]
        '404':
          description: Section not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    patch:
      operationId: updateSection
      summary: Update a section
      tags: [Sections]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SectionUpdate'
      responses:
        '200':
          description: Section updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Section'
                required: [success, data]
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '404':
          description: Section not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '409':
          description: Conflict (duplicate order_index)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    delete:
      operationId: deleteSection
      summary: Delete a section
      tags: [Sections]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Section deleted
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  /sections/{id}/quiz:
    get:
      operationId: getSectionQuiz
      summary: Get the quiz for a section
      tags: [Sections, Quizzes]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Quiz details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Quiz'
                required: [success, data]
        '404':
          description: Section or quiz not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  # Quizzes
  /quizzes:
    get:
      operationId: listQuizzes
      summary: List quizzes
      tags: [Quizzes]
      parameters:
        - name: section_id
          in: query
          schema:
            type: string
            format: uuid
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: List of quizzes
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Quiz'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                required: [success, data, pagination]
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    post:
      operationId: createQuiz
      summary: Create a new quiz
      tags: [Quizzes]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuizCreate'
      responses:
        '201':
          description: Quiz created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Quiz'
                required: [success, data]
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '409':
          description: Quiz already exists for this section
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  /quizzes/{id}:
    get:
      operationId: getQuiz
      summary: Get a single quiz
      tags: [Quizzes]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Quiz details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Quiz'
                required: [success, data]
        '404':
          description: Quiz not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    patch:
      operationId: updateQuiz
      summary: Update a quiz
      tags: [Quizzes]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuizUpdate'
      responses:
        '200':
          description: Quiz updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Quiz'
                required: [success, data]
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '404':
          description: Quiz not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    delete:
      operationId: deleteQuiz
      summary: Delete a quiz
      tags: [Quizzes]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Quiz deleted
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  # Profiles
  /profiles:
    get:
      operationId: getOwnProfile
      summary: Get your own profile
      tags: [Profiles]
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Profile details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Profile'
                required: [success, data]
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '404':
          description: Profile not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  /profiles/{id}:
    get:
      operationId: getProfile
      summary: Get a profile by ID (own only)
      tags: [Profiles]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Profile details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Profile'
                required: [success, data]
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '404':
          description: Profile not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    patch:
      operationId: updateProfile
      summary: Update a profile (own only)
      tags: [Profiles]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProfileUpdate'
      responses:
        '200':
          description: Profile updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/Profile'
                required: [success, data]
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '404':
          description: Profile not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  # Quiz Results
  /quiz-results:
    get:
      operationId: listQuizResults
      summary: List your quiz results
      tags: [Quiz Results]
      security:
        - bearerAuth: []
      parameters:
        - name: quiz_id
          in: query
          schema:
            type: string
            format: uuid
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: List of quiz results
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/QuizResult'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                required: [success, data, pagination]
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    post:
      operationId: submitQuizResult
      summary: Submit a quiz result
      tags: [Quiz Results]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuizResultCreate'
      responses:
        '201':
          description: Quiz result submitted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/QuizResult'
                required: [success, data]
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  /quiz-results/{id}:
    get:
      operationId: getQuizResult
      summary: Get a single quiz result (own only)
      tags: [Quiz Results]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Quiz result details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/QuizResult'
                required: [success, data]
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '404':
          description: Quiz result not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  # Progress
  /progress:
    get:
      operationId: listProgress
      summary: List your module progress
      tags: [Progress]
      security:
        - bearerAuth: []
      parameters:
        - name: module_id
          in: query
          schema:
            type: string
            format: uuid
        - name: status
          in: query
          schema:
            $ref: '#/components/schemas/ProgressStatus'
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: List of progress records
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserModuleProgress'
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                required: [success, data, pagination]
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    post:
      operationId: startModule
      summary: Start a module (create progress)
      tags: [Progress]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProgressCreate'
      responses:
        '201':
          description: Progress created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/UserModuleProgress'
                required: [success, data]
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '409':
          description: Progress already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

  /progress/{id}:
    get:
      operationId: getProgress
      summary: Get a progress record (own only)
      tags: [Progress]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Progress details
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/UserModuleProgress'
                required: [success, data]
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '404':
          description: Progress not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'

    patch:
      operationId: updateProgress
      summary: Update progress (own only)
      tags: [Progress]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProgressUpdate'
      responses:
        '200':
          description: Progress updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    const: true
                  data:
                    $ref: '#/components/schemas/UserModuleProgress'
                required: [success, data]
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '404':
          description: Progress not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
